{"ast":null,"code":"import prisma from 'src/lib/prisma';\nexport default async function handle(req, res) {\n  // id = req;\n  const {\n    query: {\n      supervisao,\n      ano\n    }\n  } = req; // const action = `${rel}.findMany`\n\n  const posts = await prisma.relatorios.findMany({\n    where: {\n      AND: [{\n        supervisao\n      }, {\n        ano\n      }]\n    }\n  }).finally(async () => {\n    await prisma.$disconnect();\n  });\n  res.statuCode = 200;\n  res.setHeader('Content-Type', 'aplication/json'); //  res.end(JSON.stringify({ posts }));\n\n  res.json(posts);\n}","map":{"version":3,"sources":["E:/src/next/sistemas/idpb-app/src/pages/api/consultaRegiao/[supervisao]/[mes]/[ano].js"],"names":["prisma","handle","req","res","query","supervisao","ano","posts","relatorios","findMany","where","AND","finally","$disconnect","statuCode","setHeader","json"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,gBAAnB;AAEA,eAAe,eAAeC,MAAf,CAAsBC,GAAtB,EAA2BC,GAA3B,EAAgC;AAC7C;AACA,QAAM;AACJC,IAAAA,KAAK,EAAE;AAAEC,MAAAA,UAAF;AAAcC,MAAAA;AAAd;AADH,MAEFJ,GAFJ,CAF6C,CAM7C;;AACA,QAAMK,KAAK,GAAG,MAAMP,MAAM,CAACQ,UAAP,CACjBC,QADiB,CACR;AACRC,IAAAA,KAAK,EAAE;AACLC,MAAAA,GAAG,EAAE,CAAC;AAAEN,QAAAA;AAAF,OAAD,EAAiB;AAAEC,QAAAA;AAAF,OAAjB;AADA;AADC,GADQ,EAMjBM,OANiB,CAMT,YAAY;AACnB,UAAMZ,MAAM,CAACa,WAAP,EAAN;AACD,GARiB,CAApB;AASAV,EAAAA,GAAG,CAACW,SAAJ,GAAgB,GAAhB;AACAX,EAAAA,GAAG,CAACY,SAAJ,CAAc,cAAd,EAA8B,iBAA9B,EAjB6C,CAkB7C;;AACAZ,EAAAA,GAAG,CAACa,IAAJ,CAAST,KAAT;AACD","sourcesContent":["import prisma from 'src/lib/prisma';\r\n\r\nexport default async function handle(req, res) {\r\n  // id = req;\r\n  const {\r\n    query: { supervisao, ano },\r\n  } = req;\r\n\r\n  // const action = `${rel}.findMany`\r\n  const posts = await prisma.relatorios\r\n    .findMany({\r\n      where: {\r\n        AND: [{ supervisao }, { ano }],\r\n      },\r\n    })\r\n    .finally(async () => {\r\n      await prisma.$disconnect();\r\n    });\r\n  res.statuCode = 200;\r\n  res.setHeader('Content-Type', 'aplication/json');\r\n  //  res.end(JSON.stringify({ posts }));\r\n  res.json(posts);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}