{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\src\\\\next\\\\sistemas\\\\idpb-app\\\\src\\\\pages\\\\login.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport { useState } from 'react';\nimport useUser from '../lib/useUser';\nimport Layout from '../components/Layout';\nimport Form from '../components/Form';\nimport fetchJson from '../lib/fetchJson';\n\nconst Login = () => {\n  const {\n    mutateUser\n  } = useUser({\n    redirectTo: '/profile-sg',\n    redirectIfFound: true\n  });\n  const {\n    0: errorMsg,\n    1: setErrorMsg\n  } = useState('');\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const body = {\n      username: e.currentTarget.username.value\n    };\n\n    try {\n      await mutateUser(fetchJson('/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(body)\n      }));\n    } catch (error) {\n      console.error('An unexpected error happened:', error);\n      setErrorMsg(error.data.message);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jsx-324748941\" + \" \" + \"login\",\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        isLogin: true,\n        errorMessage: errorMsg,\n        onSubmit: handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"324748941\",\n      children: \".login.jsx-324748941{max-width:21rem;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkU6XFxzcmNcXG5leHRcXHNpc3RlbWFzXFxpZHBiLWFwcFxcc3JjXFxwYWdlc1xcbG9naW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBd0NrQixBQUcyQixnQkFDRixjQUNELGFBQ1Msc0JBQ0osa0JBQ3BCIiwiZmlsZSI6IkU6XFxzcmNcXG5leHRcXHNpc3RlbWFzXFxpZHBiLWFwcFxcc3JjXFxwYWdlc1xcbG9naW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VVc2VyIGZyb20gJy4uL2xpYi91c2VVc2VyJztcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9MYXlvdXQnO1xuaW1wb3J0IEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtJztcbmltcG9ydCBmZXRjaEpzb24gZnJvbSAnLi4vbGliL2ZldGNoSnNvbic7XG5cbmNvbnN0IExvZ2luID0gKCkgPT4ge1xuICBjb25zdCB7IG11dGF0ZVVzZXIgfSA9IHVzZVVzZXIoe1xuICAgIHJlZGlyZWN0VG86ICcvcHJvZmlsZS1zZycsXG4gICAgcmVkaXJlY3RJZkZvdW5kOiB0cnVlLFxuICB9KTtcblxuICBjb25zdCBbZXJyb3JNc2csIHNldEVycm9yTXNnXSA9IHVzZVN0YXRlKCcnKTtcblxuICBhc3luYyBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICB1c2VybmFtZTogZS5jdXJyZW50VGFyZ2V0LnVzZXJuYW1lLnZhbHVlLFxuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgbXV0YXRlVXNlcihcbiAgICAgICAgZmV0Y2hKc29uKCcvYXBpL2xvZ2luJywge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFwcGVuZWQ6JywgZXJyb3IpO1xuICAgICAgc2V0RXJyb3JNc2coZXJyb3IuZGF0YS5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxMYXlvdXQ+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvZ2luXCI+XG4gICAgICAgIDxGb3JtIGlzTG9naW4gZXJyb3JNZXNzYWdlPXtlcnJvck1zZ30gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0gLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAubG9naW4ge1xuICAgICAgICAgIG1heC13aWR0aDogMjFyZW07XG4gICAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgICAgcGFkZGluZzogMXJlbTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTG9naW47XG4iXX0= */\\n/*@ sourceURL=E:\\\\\\\\src\\\\\\\\next\\\\\\\\sistemas\\\\\\\\idpb-app\\\\\\\\src\\\\\\\\pages\\\\\\\\login.js */\"\n    }, void 0, false, void 0, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n};\n\nexport default Login;","map":{"version":3,"sources":["E:/src/next/sistemas/idpb-app/src/pages/login.js"],"names":["useState","useUser","Layout","Form","fetchJson","Login","mutateUser","redirectTo","redirectIfFound","errorMsg","setErrorMsg","handleSubmit","e","preventDefault","body","username","currentTarget","value","method","headers","JSON","stringify","error","console","data","message"],"mappings":";;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,SAAP,MAAsB,kBAAtB;;AAEA,MAAMC,KAAK,GAAG,MAAM;AAClB,QAAM;AAAEC,IAAAA;AAAF,MAAiBL,OAAO,CAAC;AAC7BM,IAAAA,UAAU,EAAE,aADiB;AAE7BC,IAAAA,eAAe,EAAE;AAFY,GAAD,CAA9B;AAKA,QAAM;AAAA,OAACC,QAAD;AAAA,OAAWC;AAAX,MAA0BV,QAAQ,CAAC,EAAD,CAAxC;;AAEA,iBAAeW,YAAf,CAA4BC,CAA5B,EAA+B;AAC7BA,IAAAA,CAAC,CAACC,cAAF;AAEA,UAAMC,IAAI,GAAG;AACXC,MAAAA,QAAQ,EAAEH,CAAC,CAACI,aAAF,CAAgBD,QAAhB,CAAyBE;AADxB,KAAb;;AAIA,QAAI;AACF,YAAMX,UAAU,CACdF,SAAS,CAAC,YAAD,EAAe;AACtBc,QAAAA,MAAM,EAAE,MADc;AAEtBC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB,SAFa;AAGtBL,QAAAA,IAAI,EAAEM,IAAI,CAACC,SAAL,CAAeP,IAAf;AAHgB,OAAf,CADK,CAAhB;AAOD,KARD,CAQE,OAAOQ,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAc,+BAAd,EAA+CA,KAA/C;AACAZ,MAAAA,WAAW,CAACY,KAAK,CAACE,IAAN,CAAWC,OAAZ,CAAX;AACD;AACF;;AAED,sBACE,QAAC,MAAD;AAAA,4BACE;AAAA,yCAAe,OAAf;AAAA,6BACE,QAAC,IAAD;AAAM,QAAA,OAAO,MAAb;AAAc,QAAA,YAAY,EAAEhB,QAA5B;AAAsC,QAAA,QAAQ,EAAEE;AAAhD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAgBD,CA7CD;;AA+CA,eAAeN,KAAf","sourcesContent":["import { useState } from 'react';\nimport useUser from '../lib/useUser';\nimport Layout from '../components/Layout';\nimport Form from '../components/Form';\nimport fetchJson from '../lib/fetchJson';\n\nconst Login = () => {\n  const { mutateUser } = useUser({\n    redirectTo: '/profile-sg',\n    redirectIfFound: true,\n  });\n\n  const [errorMsg, setErrorMsg] = useState('');\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    const body = {\n      username: e.currentTarget.username.value,\n    };\n\n    try {\n      await mutateUser(\n        fetchJson('/api/login', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(body),\n        }),\n      );\n    } catch (error) {\n      console.error('An unexpected error happened:', error);\n      setErrorMsg(error.data.message);\n    }\n  }\n\n  return (\n    <Layout>\n      <div className=\"login\">\n        <Form isLogin errorMessage={errorMsg} onSubmit={handleSubmit} />\n      </div>\n      <style jsx>{`\n        .login {\n          max-width: 21rem;\n          margin: 0 auto;\n          padding: 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n      `}</style>\n    </Layout>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}