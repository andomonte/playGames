{"ast":null,"code":"import NextAuth from 'next-auth';\nimport Providers from 'next-auth/providers';\nimport useSWR from 'swr';\nimport fetch from 'unfetch'; // import consultaUsuarios from '../consultaDados';\n// Configure one or more authentication providers\n\nconst options = {\n  providers: [// ...add more providers here\n\n  /*     Providers.Google({\r\n    clientId: process.env.GOOGLE_CLIENT_ID,\r\n    clientSecret: process.env.GOOGLE_CLIENT_SECRET,\r\n    authorizationUrl:\r\n      'https://accounts.google.com/o/oauth2/v2/auth?prompt=consent&access_type=offline&response_type=code',\r\n  }),\r\n  */\n  Providers.Credentials({\n    pages: {\n      signIn: '/singin'\n    },\n    // The name to display on the sign in form (e.g. 'Sign in with...')\n    name: 'Credenciais',\n    // The credentials is used to generate a suitable form on the sign in page.\n    // You can specify whatever fields you are expecting to be submitted.\n    // e.g. domain, username, password, 2FA token, etc.\n    credentials: {\n      username: {\n        label: 'Nome do Usuario',\n        type: 'text',\n        placeholder: 'usuario'\n      },\n      password: {\n        label: 'Senha',\n        type: 'password',\n        placehlder: 'senha'\n      }\n    },\n\n    async authorize(credentials) {\n      console.log(credentials); // Add logic here to look up the user from the credentials supplied\n      //          const user = consultaUsuarios(credentials);\n\n      const fetcher = url => fetch(url).then(r => r.json());\n\n      const user = useSWR('/api/getUser', fetcher, {\n        initialData: credentials.username\n      });\n\n      if (user) {\n        // Any object returned will be saved in `user` property of the JWT\n        return user;\n      } // If you return null or false then the credentials will be rejected\n\n\n      return null; // You can also Reject this callback with an Error or with a URL:\n      // throw new Error('error message') // Redirect to error page\n      // throw '/path/to/redirect'        // Redirect to a URL\n    }\n\n  })],\n  session: {\n    jwt: true\n  },\n  jwt: {\n    secret: process.env.JWT_SECRET\n  } // A database is optional, but required to persist accounts in a database\n  // database: process.env.DATABASE_URL,\n\n};\nexport default ((req, res) => NextAuth(req, res, options));","map":{"version":3,"sources":["E:/src/next/sistemas/idpb-app/src/pages/api/auth/[...nextauth].js"],"names":["NextAuth","Providers","useSWR","fetch","options","providers","Credentials","pages","signIn","name","credentials","username","label","type","placeholder","password","placehlder","authorize","console","log","fetcher","url","then","r","json","user","initialData","session","jwt","secret","process","env","JWT_SECRET","req","res"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,WAArB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,MAAP,MAAmB,KAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB,C,CACA;AACA;;AACA,MAAMC,OAAO,GAAG;AACdC,EAAAA,SAAS,EAAE,CACT;;AACA;AACJ;AACA;AACA;AACA;AACA;AACA;AAAIJ,EAAAA,SAAS,CAACK,WAAV,CACE;AACEC,IAAAA,KAAK,EAAE;AACLC,MAAAA,MAAM,EAAE;AADH,KADT;AAIE;AACAC,IAAAA,IAAI,EAAE,aALR;AAME;AACA;AACA;AACAC,IAAAA,WAAW,EAAE;AACXC,MAAAA,QAAQ,EAAE;AACRC,QAAAA,KAAK,EAAE,iBADC;AAERC,QAAAA,IAAI,EAAE,MAFE;AAGRC,QAAAA,WAAW,EAAE;AAHL,OADC;AAMXC,MAAAA,QAAQ,EAAE;AACRH,QAAAA,KAAK,EAAE,OADC;AAERC,QAAAA,IAAI,EAAE,UAFE;AAGRG,QAAAA,UAAU,EAAE;AAHJ;AANC,KATf;;AAqBE,UAAMC,SAAN,CAAgBP,WAAhB,EAA6B;AAC3BQ,MAAAA,OAAO,CAACC,GAAR,CAAYT,WAAZ,EAD2B,CAG3B;AAEA;;AACA,YAAMU,OAAO,GAAIC,GAAD,IAASlB,KAAK,CAACkB,GAAD,CAAL,CAAWC,IAAX,CAAiBC,CAAD,IAAOA,CAAC,CAACC,IAAF,EAAvB,CAAzB;;AACA,YAAMC,IAAI,GAAGvB,MAAM,CAAC,cAAD,EAAiBkB,OAAjB,EAA0B;AAC3CM,QAAAA,WAAW,EAAEhB,WAAW,CAACC;AADkB,OAA1B,CAAnB;;AAGA,UAAIc,IAAJ,EAAU;AACR;AACA,eAAOA,IAAP;AACD,OAb0B,CAc3B;;;AACA,aAAO,IAAP,CAf2B,CAgB3B;AACA;AACA;AACD;;AAxCH,GADF,CARS,CADG;AAuDdE,EAAAA,OAAO,EAAE;AACPC,IAAAA,GAAG,EAAE;AADE,GAvDK;AA0DdA,EAAAA,GAAG,EAAE;AACHC,IAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC;AADjB,GA1DS,CA6Dd;AACA;;AA9Dc,CAAhB;AAgEA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAclC,QAAQ,CAACiC,GAAD,EAAMC,GAAN,EAAW9B,OAAX,CAArC","sourcesContent":["import NextAuth from 'next-auth';\r\nimport Providers from 'next-auth/providers';\r\nimport useSWR from 'swr';\r\nimport fetch from 'unfetch';\r\n// import consultaUsuarios from '../consultaDados';\r\n// Configure one or more authentication providers\r\nconst options = {\r\n  providers: [\r\n    // ...add more providers here\r\n    /*     Providers.Google({\r\n      clientId: process.env.GOOGLE_CLIENT_ID,\r\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET,\r\n      authorizationUrl:\r\n        'https://accounts.google.com/o/oauth2/v2/auth?prompt=consent&access_type=offline&response_type=code',\r\n    }),\r\n */ Providers.Credentials(\r\n      {\r\n        pages: {\r\n          signIn: '/singin',\r\n        },\r\n        // The name to display on the sign in form (e.g. 'Sign in with...')\r\n        name: 'Credenciais',\r\n        // The credentials is used to generate a suitable form on the sign in page.\r\n        // You can specify whatever fields you are expecting to be submitted.\r\n        // e.g. domain, username, password, 2FA token, etc.\r\n        credentials: {\r\n          username: {\r\n            label: 'Nome do Usuario',\r\n            type: 'text',\r\n            placeholder: 'usuario',\r\n          },\r\n          password: {\r\n            label: 'Senha',\r\n            type: 'password',\r\n            placehlder: 'senha',\r\n          },\r\n        },\r\n        async authorize(credentials) {\r\n          console.log(credentials);\r\n\r\n          // Add logic here to look up the user from the credentials supplied\r\n\r\n          //          const user = consultaUsuarios(credentials);\r\n          const fetcher = (url) => fetch(url).then((r) => r.json());\r\n          const user = useSWR('/api/getUser', fetcher, {\r\n            initialData: credentials.username,\r\n          });\r\n          if (user) {\r\n            // Any object returned will be saved in `user` property of the JWT\r\n            return user;\r\n          }\r\n          // If you return null or false then the credentials will be rejected\r\n          return null;\r\n          // You can also Reject this callback with an Error or with a URL:\r\n          // throw new Error('error message') // Redirect to error page\r\n          // throw '/path/to/redirect'        // Redirect to a URL\r\n        },\r\n      },\r\n    ),\r\n  ],\r\n\r\n  session: {\r\n    jwt: true,\r\n  },\r\n  jwt: {\r\n    secret: process.env.JWT_SECRET,\r\n  },\r\n  // A database is optional, but required to persist accounts in a database\r\n  // database: process.env.DATABASE_URL,\r\n};\r\nexport default (req, res) => NextAuth(req, res, options);\r\n"]},"metadata":{},"sourceType":"module"}