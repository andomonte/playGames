{"ast":null,"code":"import bcrypt from 'bcrypt';\nimport { User } from '../../lib/db';\n\nconst handler = async (req, res) => {\n  const {\n    username,\n    password\n  } = req.body;\n\n  if (!username || !password) {\n    return res.status(403).json({\n      message: 'Invalid credentials'\n    });\n  }\n\n  try {\n    const hash = bcrypt.hashSync(password, 10);\n    const user = await User.query().insert({\n      username,\n      password: hash\n    });\n    console.log('user', user);\n    res.status(200).json({\n      message: `User ${user.username} created`\n    });\n  } catch (error) {\n    console.log('error', error);\n    res.status(500).json({\n      message: error.message\n    });\n  }\n};\n\nexport default handler; //  const fetcher = (url) => fetch(url).then((r) => r.json());\n//   const user = await useSWR('/api/getUser', fetcher, {\n//      initialData: credentials.username,","map":null,"metadata":{},"sourceType":"module"}