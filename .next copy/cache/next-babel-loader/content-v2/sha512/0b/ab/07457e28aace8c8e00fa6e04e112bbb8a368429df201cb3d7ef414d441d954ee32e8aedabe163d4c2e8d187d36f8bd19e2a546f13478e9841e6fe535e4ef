{"ast":null,"code":"import aws from 'aws-sdk'; // import crypto from 'crypto';\n// import { promisify } from 'util';\n// const randomBytes = promisify(crypto.randomBytes);\n\nconst region = process.env.AWSREGION;\nconst bucketName = 'videosministeriomissoes';\nconst accessKeyId = process.env.AWSACCESS_KEY;\nconst secretAccessKey = process.env.AWSSECRET_KEY;\naws.config.update({\n  secretAccessKey: process.env.AWSSECRET_KEY,\n  accessKeyId: process.env.AWSACCESS_KEY,\n  region: process.env.AWSREGION\n});\nconst s3 = new aws.S3({\n  region,\n  accessKeyId,\n  secretAccessKey,\n  signatureVersion: 'v4'\n});\nexport async function uploadVideosS3(fileName) {\n  // const rawBytes = await randomBytes(16);\n  // const imageName = rawBytes.toString('hex');\n  const params = {\n    Bucket: bucketName,\n    Key: fileName\n  };\n  const uploadURL = await s3.getSignedUrlPromise('putObject', params);\n  return uploadURL;\n}\nexport default uploadVideosS3;","map":null,"metadata":{},"sourceType":"module"}