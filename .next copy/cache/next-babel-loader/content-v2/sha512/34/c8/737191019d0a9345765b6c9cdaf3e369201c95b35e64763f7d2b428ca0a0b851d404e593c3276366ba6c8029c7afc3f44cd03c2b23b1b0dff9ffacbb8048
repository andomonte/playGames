{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport { Line, Bar, Pie } from '@reactchartjs/react-chart.js';\nimport { signOut } from 'next-auth/client';\nimport useSWR from 'swr';\nimport axios from 'axios';\n\nconst fetcher = url => axios.get(url).then(res => res.data);\n\nfunction Graficos({\n  item,\n  secao,\n  Data,\n  tipo\n}) {\n  const dadosUser = item.filter(val => val.email === secao.user.email);\n\n  if (dadosUser.length === 0) {\n    signOut({\n      callbackUrl: `${window.location.origin}`\n    });\n  }\n\n  const mes = String(Number(Data.slice(3, 5)));\n  const ano = Data.slice(6, 10); //  const [session] = useSession();\n\n  const url = `${window.location.origin}/api/consultaDados/${item[0].codigoIgreja}/${mes}/${ano}`;\n  const visitantes = [];\n  const conversoes = [];\n  const ofertas = [];\n  const {\n    data\n  } = useSWR(url, fetcher);\n\n  if (data) {\n    for (let i = 0; i < data.length; i += 1) {\n      //    adultos[data[i].semana - 1] = data[i].adultos;\n      //    crianças[data[i].semana - 1] = data[i].criancas;\n      visitantes[data[i].semana - 1] = data[i].visitantes;\n      conversoes[data[i].semana - 1] = data[i].conversoes;\n      ofertas[data[i].semana - 1] = data[i].ofertas.replace(',', '.'); // console.log(ofertas);\n    }\n  }\n\n  const dataGrafic = {\n    labels: ['sem-1', 'sem-2', 'sem-3', 'sem-4', 'sem-5'],\n    datasets: [{\n      label: 'Visit.',\n      data: visitantes,\n      fill: false,\n      backgroundColor: '#ffa726',\n      borderColor: '#ff9800',\n      yAxisID: 'y-axis-1'\n    }, {\n      label: 'Conver.',\n      data: conversoes,\n      fill: false,\n      backgroundColor: '#ffff00',\n      borderColor: '#faff01',\n      yAxisID: 'y-axis-1'\n    }, {\n      label: 'Ofertas',\n      data: ofertas,\n      fill: false,\n      backgroundColor: '#283593',\n      borderColor: '#1a237e',\n      yAxisID: 'y-axis-2'\n    }]\n  };\n  const dataGrafic2 = {\n    labels: ['sem-1', 'sem-2', 'sem-3', 'sem-4', 'sem-5'],\n    datasets: [{\n      label: 'Ofertas do Mês',\n      data: [ofertas[0], ofertas[1], ofertas[2], ofertas[3], ofertas[4]],\n      backgroundColor: ['#283593', '#388e3c', '#ff9800', '#6d4c41', '#546e7a'],\n      borderColor: ['#1a237e', '#43a047', '#ffa726', '#6d4c41', '#78909c'],\n      borderWidth: 1\n    }]\n  };\n  const options = {\n    scales: {\n      yAxes: [{\n        ticks: {\n          beginAtZero: true\n        },\n        type: 'linear',\n        display: true,\n        position: 'left',\n        id: 'y-axis-1',\n        showAllTooltips: false\n      }, {\n        ticks: {\n          beginAtZero: true\n        },\n        type: 'linear',\n        display: true,\n        position: 'right',\n        id: 'y-axis-2',\n        gridLines: {\n          drawOnArea: false\n        }\n      }]\n    }\n  };\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [tipo === 'linhas' ? /*#__PURE__*/_jsx(Line, {\n      data: dataGrafic,\n      options: options\n    }) : null, tipo === 'barras' ? /*#__PURE__*/_jsx(Bar, {\n      data: dataGrafic,\n      options: options\n    }) : null, tipo === 'acumulados' ? /*#__PURE__*/_jsx(Pie, {\n      data: dataGrafic2\n    }) : null]\n  });\n}\n\nexport default Graficos;","map":null,"metadata":{},"sourceType":"module"}