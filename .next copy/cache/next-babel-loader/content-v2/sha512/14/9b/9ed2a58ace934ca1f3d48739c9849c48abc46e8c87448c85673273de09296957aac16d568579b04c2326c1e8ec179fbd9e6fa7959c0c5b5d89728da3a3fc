{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"E:/src/next/sistemas/idpb-app/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/src/next/sistemas/idpb-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"E:\\\\src\\\\next\\\\sistemas\\\\idpb-app\\\\src\\\\components\\\\midiaPlay\\\\userTelas\\\\Upload.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport Spinner from './Spinner';\nimport Video from './Video';\nexport default function Upload() {\n  _s();\n\n  var _useState = useState(false),\n      showSpinner = _useState[0],\n      setShowSpinner = _useState[1];\n\n  var _useState2 = useState(false),\n      showVideo = _useState2[0],\n      setShowVideo = _useState2[1];\n\n  var _useState3 = useState(''),\n      publicId = _useState3[0],\n      setPublicId = _useState3[1];\n\n  var onChange = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var formData, file, response, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setShowSpinner(true);\n              event.preventDefault();\n              formData = new FormData();\n              file = event.target.files[0];\n              formData.append('inputFile', file);\n              _context.prev = 5;\n              _context.next = 8;\n              return fetch('/api/upload', {\n                method: 'POST',\n                body: formData\n              });\n\n            case 8:\n              response = _context.sent;\n              _context.next = 11;\n              return response.json();\n\n            case 11:\n              data = _context.sent;\n              setPublicId(data.public_id);\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](5);\n              setShowSpinner(false);\n\n            case 18:\n              _context.prev = 18;\n              setShowSpinner(false);\n              setShowVideo(true);\n              return _context.finish(18);\n\n            case 22:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 15, 18, 22]]);\n    }));\n\n    return function onChange(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Spinner, {\n      displayed: showSpinner\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"mx-auto w-64 text-black items-center p-4 m-5 bg-white rounded-lg shadow-2xl tracking-wide uppercase border border-yellow-500 cursor-pointer hover:bg-yellow-200 \".concat(showSpinner || showVideo ? 'hidden' : 'flex flex-col'),\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"w-8 h-8\",\n        fill: \"currentColor\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        viewBox: \"0 0 20 20\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mt-2 text-base text-black leading-normal\",\n        children: \"Select a video\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: onChange,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Upload, \"Jyelh65Kexk0vjBn0Ny8a1GQqvs=\");\n\n_c = Upload;\n\nvar _c;\n\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"sources":["E:/src/next/sistemas/idpb-app/src/components/midiaPlay/userTelas/Upload.js"],"names":["useState","Spinner","Video","Upload","showSpinner","setShowSpinner","showVideo","setShowVideo","publicId","setPublicId","onChange","event","preventDefault","formData","FormData","file","target","files","append","fetch","method","body","response","json","data","public_id"],"mappings":";;;;;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,eAAe,SAASC,MAAT,GAAkB;AAAA;;AAAA,kBACOH,QAAQ,CAAC,KAAD,CADf;AAAA,MACxBI,WADwB;AAAA,MACXC,cADW;;AAAA,mBAEGL,QAAQ,CAAC,KAAD,CAFX;AAAA,MAExBM,SAFwB;AAAA,MAEbC,YAFa;;AAAA,mBAGCP,QAAQ,CAAC,EAAD,CAHT;AAAA,MAGxBQ,QAHwB;AAAA,MAGdC,WAHc;;AAI/B,MAAMC,QAAQ;AAAA,wEAAG,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACfN,cAAAA,cAAc,CAAC,IAAD,CAAd;AACAM,cAAAA,KAAK,CAACC,cAAN;AACMC,cAAAA,QAHS,GAGE,IAAIC,QAAJ,EAHF;AAITC,cAAAA,IAJS,GAIFJ,KAAK,CAACK,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAJE;AAKfJ,cAAAA,QAAQ,CAACK,MAAT,CAAgB,WAAhB,EAA6BH,IAA7B;AALe;AAAA;AAAA,qBAQUI,KAAK,CAAC,aAAD,EAAgB;AAC1CC,gBAAAA,MAAM,EAAE,MADkC;AAE1CC,gBAAAA,IAAI,EAAER;AAFoC,eAAhB,CARf;;AAAA;AAQPS,cAAAA,QARO;AAAA;AAAA,qBAYMA,QAAQ,CAACC,IAAT,EAZN;;AAAA;AAYPC,cAAAA,IAZO;AAabf,cAAAA,WAAW,CAACe,IAAI,CAACC,SAAN,CAAX;AAba;AAAA;;AAAA;AAAA;AAAA;AAebpB,cAAAA,cAAc,CAAC,KAAD,CAAd;;AAfa;AAAA;AAiBbA,cAAAA,cAAc,CAAC,KAAD,CAAd;AACAE,cAAAA,YAAY,CAAC,IAAD,CAAZ;AAlBa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAARG,QAAQ;AAAA;AAAA;AAAA,KAAd;;AAqBA,sBACE;AAAA,4BACE,QAAC,OAAD;AAAS,MAAA,SAAS,EAAEN;AAApB;AAAA;AAAA;AAAA;AAAA,YADF,eAGE;AACE,MAAA,SAAS,4KACPA,WAAW,IAAIE,SAAf,GAA2B,QAA3B,GAAsC,eAD/B,CADX;AAAA,8BAKE;AACE,QAAA,SAAS,EAAC,SADZ;AAEE,QAAA,IAAI,EAAC,cAFP;AAGE,QAAA,KAAK,EAAC,4BAHR;AAIE,QAAA,OAAO,EAAC,WAJV;AAAA,+BAME;AAAM,UAAA,CAAC,EAAC;AAAR;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,cALF,eAaE;AAAM,QAAA,SAAS,EAAC,0CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAbF,eAgBE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,QAAQ,EAAEI,QAA7B;AAAuC,QAAA,SAAS,EAAC;AAAjD;AAAA;AAAA;AAAA;AAAA,cAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,YAHF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAwBD;;GAjDuBP,M;;KAAAA,M","sourcesContent":["import { useState } from 'react';\r\nimport Spinner from './Spinner';\r\nimport Video from './Video';\r\n\r\nexport default function Upload() {\r\n  const [showSpinner, setShowSpinner] = useState(false);\r\n  const [showVideo, setShowVideo] = useState(false);\r\n  const [publicId, setPublicId] = useState('');\r\n  const onChange = async (event) => {\r\n    setShowSpinner(true);\r\n    event.preventDefault();\r\n    const formData = new FormData();\r\n    const file = event.target.files[0];\r\n    formData.append('inputFile', file);\r\n\r\n    try {\r\n      const response = await fetch('/api/upload', {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n      const data = await response.json();\r\n      setPublicId(data.public_id);\r\n    } catch (error) {\r\n      setShowSpinner(false);\r\n    } finally {\r\n      setShowSpinner(false);\r\n      setShowVideo(true);\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <Spinner displayed={showSpinner} />\r\n      {/* <Video publicId={publicId} /> */}\r\n      <label\r\n        className={`mx-auto w-64 text-black items-center p-4 m-5 bg-white rounded-lg shadow-2xl tracking-wide uppercase border border-yellow-500 cursor-pointer hover:bg-yellow-200 ${\r\n          showSpinner || showVideo ? 'hidden' : 'flex flex-col'\r\n        }`}\r\n      >\r\n        <svg\r\n          className=\"w-8 h-8\"\r\n          fill=\"currentColor\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 20 20\"\r\n        >\r\n          <path d=\"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z\" />\r\n        </svg>\r\n        <span className=\"mt-2 text-base text-black leading-normal\">\r\n          Select a video\r\n        </span>\r\n        <input type=\"file\" onChange={onChange} className=\"hidden\" />\r\n      </label>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}