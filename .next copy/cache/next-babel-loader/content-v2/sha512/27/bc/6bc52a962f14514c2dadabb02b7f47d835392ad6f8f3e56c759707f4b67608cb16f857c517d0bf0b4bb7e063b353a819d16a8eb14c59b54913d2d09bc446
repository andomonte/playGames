{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\src\\\\next\\\\sistemas\\\\idpb-app\\\\src\\\\components\\\\relatorios\\\\userTelas\\\\graficos2.js\";\nimport React from 'react';\nimport { Line, Bar, Pie } from '@reactchartjs/react-chart.js';\nimport { signOut } from 'next-auth/client';\nimport useSWR from 'swr';\nimport axios from 'axios';\nChart.pluginService.register({\n  beforeRender(chart) {\n    if (chart.config.options.showAllTooltips) {\n      chart.pluginTooltips = [];\n      chart.config.data.datasets.forEach((dataset, i) => {\n        chart.getDatasetMeta(i).data.forEach((sector, j) => {\n          chart.pluginTooltips.push(new Chart.Tooltip({\n            _chart: chart.chart,\n            _chartInstance: chart,\n            _data: chart.data,\n            _options: chart.options.tooltips,\n            _active: [sector]\n          }, chart));\n        });\n      });\n      chart.options.tooltips.enabled = false;\n    }\n  },\n\n  afterDraw(chart, easing) {\n    if (chart.config.options.showAllTooltips) {\n      if (!chart.allTooltipsOnce) {\n        if (easing !== 1) return;\n        chart.allTooltipsOnce = true;\n      }\n\n      chart.options.tooltips.enabled = true;\n      Chart.helpers.each(chart.pluginTooltips, tooltip => {\n        tooltip.initialize();\n        tooltip.update();\n        tooltip.pivot();\n        tooltip.transition(easing).draw();\n      });\n      chart.options.tooltips.enabled = false;\n    }\n  }\n\n});\n\nconst fetcher = url => axios.get(url).then(res => res.data);\n\nfunction Graficos({\n  item,\n  secao,\n  Data,\n  tipo\n}) {\n  const dadosUser = item.filter(val => val.email === secao.user.email);\n\n  if (dadosUser.length === 0) {\n    signOut({\n      callbackUrl: `${window.location.origin}`\n    });\n  }\n\n  const mes = String(Number(Data.slice(3, 5)));\n  const ano = Data.slice(6, 10); //  const [session] = useSession();\n\n  const url = `${window.location.origin}/api/consultaDados/${item[0].codigoIgreja}/${mes}/${ano}`;\n  const visitantes = [];\n  const conversoes = [];\n  const ofertas = [];\n  const {\n    data\n  } = useSWR(url, fetcher);\n\n  if (data) {\n    for (let i = 0; i < data.length; i += 1) {\n      //    adultos[data[i].semana - 1] = data[i].adultos;\n      //    crianças[data[i].semana - 1] = data[i].criancas;\n      visitantes[data[i].semana - 1] = data[i].visitantes;\n      conversoes[data[i].semana - 1] = data[i].conversoes;\n      ofertas[data[i].semana - 1] = data[i].ofertas.replace(',', '.'); // console.log(ofertas);\n    }\n  }\n\n  const dataGrafic = {\n    labels: ['Semana-1', 'Semana-2', 'Semana-3', 'Semana-4'],\n    datasets: [{\n      label: 'Visit.',\n      data: visitantes,\n      fill: false,\n      backgroundColor: '#ffa726',\n      borderColor: '#ff9800',\n      yAxisID: 'y-axis-1'\n    }, {\n      label: 'Conver.',\n      data: conversoes,\n      fill: false,\n      backgroundColor: '#43a047',\n      borderColor: '#388e3c',\n      yAxisID: 'y-axis-1'\n    }, {\n      label: 'Ofertas',\n      data: ofertas,\n      fill: false,\n      backgroundColor: '#283593',\n      borderColor: '#1a237e',\n      yAxisID: 'y-axis-2'\n    }]\n  };\n  const dataGrafic2 = {\n    labels: ['S1', 'S2', 'S3', 'S4', 'S5'],\n    datasets: [{\n      label: 'Ofertas do Mês',\n      data: [ofertas[0], ofertas[1], ofertas[2], ofertas[3], ofertas[4]],\n      backgroundColor: ['#388e3c', '#283593', '#ff9800', '#546e7a'],\n      borderColor: ['#43a047', '#1a237e', '#ffa726', '#6d4c41', '#78909c'],\n      borderWidth: 1\n    }]\n  };\n  const options = {\n    scales: {\n      yAxes: [{\n        ticks: {\n          beginAtZero: true\n        },\n        type: 'linear',\n        display: true,\n        position: 'left',\n        id: 'y-axis-1',\n        showAllTooltips: false\n      }, {\n        ticks: {\n          beginAtZero: true\n        },\n        type: 'linear',\n        display: true,\n        position: 'right',\n        id: 'y-axis-2',\n        gridLines: {\n          drawOnArea: false\n        }\n      }]\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [tipo === 'linhas' ? /*#__PURE__*/_jsxDEV(Line, {\n      data: dataGrafic,\n      options: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 28\n    }, this) : null, tipo === 'barras' ? /*#__PURE__*/_jsxDEV(Bar, {\n      data: dataGrafic,\n      options: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 28\n    }, this) : null, tipo === 'acumulados' ? /*#__PURE__*/_jsxDEV(Pie, {\n      data: dataGrafic2\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 32\n    }, this) : null]\n  }, void 0, true);\n}\n\nexport default Graficos;","map":{"version":3,"sources":["E:/src/next/sistemas/idpb-app/src/components/relatorios/userTelas/graficos2.js"],"names":["React","Line","Bar","Pie","signOut","useSWR","axios","Chart","pluginService","register","beforeRender","chart","config","options","showAllTooltips","pluginTooltips","data","datasets","forEach","dataset","i","getDatasetMeta","sector","j","push","Tooltip","_chart","_chartInstance","_data","_options","tooltips","_active","enabled","afterDraw","easing","allTooltipsOnce","helpers","each","tooltip","initialize","update","pivot","transition","draw","fetcher","url","get","then","res","Graficos","item","secao","Data","tipo","dadosUser","filter","val","email","user","length","callbackUrl","window","location","origin","mes","String","Number","slice","ano","codigoIgreja","visitantes","conversoes","ofertas","semana","replace","dataGrafic","labels","label","fill","backgroundColor","borderColor","yAxisID","dataGrafic2","borderWidth","scales","yAxes","ticks","beginAtZero","type","display","position","id","gridLines","drawOnArea"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Line, Bar, Pie } from '@reactchartjs/react-chart.js';\r\nimport { signOut } from 'next-auth/client';\r\nimport useSWR from 'swr';\r\nimport axios from 'axios';\r\n\r\nChart.pluginService.register({\r\n  beforeRender(chart) {\r\n    if (chart.config.options.showAllTooltips) {\r\n      chart.pluginTooltips = [];\r\n      chart.config.data.datasets.forEach((dataset, i) => {\r\n        chart.getDatasetMeta(i).data.forEach((sector, j) => {\r\n          chart.pluginTooltips.push(\r\n            new Chart.Tooltip(\r\n              {\r\n                _chart: chart.chart,\r\n                _chartInstance: chart,\r\n                _data: chart.data,\r\n                _options: chart.options.tooltips,\r\n                _active: [sector],\r\n              },\r\n              chart,\r\n            ),\r\n          );\r\n        });\r\n      });\r\n      chart.options.tooltips.enabled = false;\r\n    }\r\n  },\r\n  afterDraw(chart, easing) {\r\n    if (chart.config.options.showAllTooltips) {\r\n      if (!chart.allTooltipsOnce) {\r\n        if (easing !== 1) return;\r\n        chart.allTooltipsOnce = true;\r\n      }\r\n\r\n      chart.options.tooltips.enabled = true;\r\n      Chart.helpers.each(chart.pluginTooltips, (tooltip) => {\r\n        tooltip.initialize();\r\n        tooltip.update();\r\n        tooltip.pivot();\r\n        tooltip.transition(easing).draw();\r\n      });\r\n      chart.options.tooltips.enabled = false;\r\n    }\r\n  },\r\n});\r\nconst fetcher = (url) => axios.get(url).then((res) => res.data);\r\nfunction Graficos({ item, secao, Data, tipo }) {\r\n  const dadosUser = item.filter((val) => val.email === secao.user.email);\r\n  if (dadosUser.length === 0) {\r\n    signOut({\r\n      callbackUrl: `${window.location.origin}`,\r\n    });\r\n  }\r\n  const mes = String(Number(Data.slice(3, 5)));\r\n  const ano = Data.slice(6, 10);\r\n  //  const [session] = useSession();\r\n  const url = `${window.location.origin}/api/consultaDados/${item[0].codigoIgreja}/${mes}/${ano}`;\r\n\r\n  const visitantes = [];\r\n  const conversoes = [];\r\n  const ofertas = [];\r\n\r\n  const { data } = useSWR(url, fetcher);\r\n  if (data) {\r\n    for (let i = 0; i < data.length; i += 1) {\r\n      //    adultos[data[i].semana - 1] = data[i].adultos;\r\n      //    crianças[data[i].semana - 1] = data[i].criancas;\r\n      visitantes[data[i].semana - 1] = data[i].visitantes;\r\n      conversoes[data[i].semana - 1] = data[i].conversoes;\r\n      ofertas[data[i].semana - 1] = data[i].ofertas.replace(',', '.');\r\n      // console.log(ofertas);\r\n    }\r\n  }\r\n  const dataGrafic = {\r\n    labels: ['Semana-1', 'Semana-2', 'Semana-3', 'Semana-4'],\r\n    datasets: [\r\n      {\r\n        label: 'Visit.',\r\n        data: visitantes,\r\n        fill: false,\r\n        backgroundColor: '#ffa726',\r\n        borderColor: '#ff9800',\r\n        yAxisID: 'y-axis-1',\r\n      },\r\n      {\r\n        label: 'Conver.',\r\n        data: conversoes,\r\n        fill: false,\r\n        backgroundColor: '#43a047',\r\n        borderColor: '#388e3c',\r\n        yAxisID: 'y-axis-1',\r\n      },\r\n      {\r\n        label: 'Ofertas',\r\n        data: ofertas,\r\n        fill: false,\r\n        backgroundColor: '#283593',\r\n        borderColor: '#1a237e',\r\n        yAxisID: 'y-axis-2',\r\n      },\r\n    ],\r\n  };\r\n\r\n  const dataGrafic2 = {\r\n    labels: ['S1', 'S2', 'S3', 'S4', 'S5'],\r\n    datasets: [\r\n      {\r\n        label: 'Ofertas do Mês',\r\n        data: [ofertas[0], ofertas[1], ofertas[2], ofertas[3], ofertas[4]],\r\n        backgroundColor: ['#388e3c', '#283593', '#ff9800', '#546e7a'],\r\n        borderColor: ['#43a047', '#1a237e', '#ffa726', '#6d4c41', '#78909c'],\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options = {\r\n    scales: {\r\n      yAxes: [\r\n        {\r\n          ticks: { beginAtZero: true },\r\n          type: 'linear',\r\n          display: true,\r\n          position: 'left',\r\n          id: 'y-axis-1',\r\n          showAllTooltips: false,\r\n        },\r\n        {\r\n          ticks: { beginAtZero: true },\r\n          type: 'linear',\r\n          display: true,\r\n          position: 'right',\r\n          id: 'y-axis-2',\r\n          gridLines: {\r\n            drawOnArea: false,\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  };\r\n  return (\r\n    <>\r\n      {tipo === 'linhas' ? <Line data={dataGrafic} options={options} /> : null}\r\n      {tipo === 'barras' ? <Bar data={dataGrafic} options={options} /> : null}\r\n      {tipo === 'acumulados' ? <Pie data={dataGrafic2} /> : null}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Graficos;\r\n"]},"metadata":{},"sourceType":"module"}