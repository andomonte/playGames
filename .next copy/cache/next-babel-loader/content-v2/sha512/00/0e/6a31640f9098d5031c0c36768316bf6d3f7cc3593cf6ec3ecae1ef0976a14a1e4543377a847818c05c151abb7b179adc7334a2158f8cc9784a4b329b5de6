{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"E:\\\\src\\\\next\\\\sistemas\\\\idpb-app\\\\src\\\\utils\\\\downloadImage.js\",\n    _this = this;\n\nimport React, { useState } from 'react';\nimport AWS from 'aws-sdk';\n\nvar downloadImg = function downloadImg() {\n  AWS.config.update({\n    accessKeyId: process.env.REACT_APP_ACCESS_ID,\n    secretAccessKey: process.env.REACT_APP_ACCESS_KEY\n  });\n\n  var handleClick = function handleClick(e) {\n    e.preventDefault();\n  };\n\n  var handleDownload = function handleDownload() {\n    var s3 = new AWS.S3();\n    var params = {\n      Bucket: process.env.REACT_APP_INTERNAL_BUCKET_NAME,\n      Key: \"ARACAJU.png\"\n    };\n\n    function downloadBlob(blob) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"ARACAJU.png\";\n      // Convert your blob into a Blob URL (a special url that points to an object in the browser's memory)\n      var blobUrl = URL.createObjectURL(blob); // Create a link element\n\n      var link = document.createElement('a'); // Set link's href to point to the Blob URL\n\n      link.href = blobUrl;\n      link.download = name; // Append link to the body\n\n      document.body.appendChild(link); // Dispatch click event on the link\n      // This is necessary as link.click() does not work on the latest firefox\n\n      link.dispatchEvent(new MouseEvent('click', {\n        bubbles: true,\n        cancelable: true,\n        view: window\n      })); // Remove link from body\n\n      document.body.removeChild(link);\n    }\n\n    s3.getObject(params, function (err, data) {\n      if (err) {\n        console.log(err, err.stack);\n      } else {\n        var csvBlob = new Blob([data.Body.toString()], {\n          type: 'text/csv;charset=utf-8;'\n        });\n        downloadBlob(csvBlob, \"ARACAJU.png\");\n      }\n    });\n  };\n\n  console.log('testando');\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"bg-white my-4\",\n      onSubmit: handleClick,\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Download\",\n        className: \"btn btn-primary btn-block mt-3\",\n        onClick: handleDownload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false);\n};\n\nexport default downloadImg;","map":{"version":3,"sources":["E:/src/next/sistemas/idpb-app/src/utils/downloadImage.js"],"names":["React","useState","AWS","downloadImg","config","update","accessKeyId","process","env","REACT_APP_ACCESS_ID","secretAccessKey","REACT_APP_ACCESS_KEY","handleClick","e","preventDefault","handleDownload","s3","S3","params","Bucket","REACT_APP_INTERNAL_BUCKET_NAME","Key","downloadBlob","blob","name","blobUrl","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","dispatchEvent","MouseEvent","bubbles","cancelable","view","window","removeChild","getObject","err","data","console","log","stack","csvBlob","Blob","Body","toString","type"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,GAAP,MAAgB,SAAhB;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxBD,EAAAA,GAAG,CAACE,MAAJ,CAAWC,MAAX,CAAkB;AAChBC,IAAAA,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC,mBADT;AAEhBC,IAAAA,eAAe,EAAEH,OAAO,CAACC,GAAR,CAAYG;AAFb,GAAlB;;AAKA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD,EAAO;AACzBA,IAAAA,CAAC,CAACC,cAAF;AACD,GAFD;;AAIA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B,QAAMC,EAAE,GAAG,IAAId,GAAG,CAACe,EAAR,EAAX;AAEA,QAAMC,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAEZ,OAAO,CAACC,GAAR,CAAYY,8BADP;AAEbC,MAAAA,GAAG;AAFU,KAAf;;AAKA,aAASC,YAAT,CAAsBC,IAAtB,EAAkD;AAAA,UAAtBC,IAAsB;AAChD;AACA,UAAMC,OAAO,GAAGC,GAAG,CAACC,eAAJ,CAAoBJ,IAApB,CAAhB,CAFgD,CAGhD;;AACA,UAAMK,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAb,CAJgD,CAKhD;;AACAF,MAAAA,IAAI,CAACG,IAAL,GAAYN,OAAZ;AACAG,MAAAA,IAAI,CAACI,QAAL,GAAgBR,IAAhB,CAPgD,CAQhD;;AACAK,MAAAA,QAAQ,CAACI,IAAT,CAAcC,WAAd,CAA0BN,IAA1B,EATgD,CAUhD;AACA;;AACAA,MAAAA,IAAI,CAACO,aAAL,CACE,IAAIC,UAAJ,CAAe,OAAf,EAAwB;AACtBC,QAAAA,OAAO,EAAE,IADa;AAEtBC,QAAAA,UAAU,EAAE,IAFU;AAGtBC,QAAAA,IAAI,EAAEC;AAHgB,OAAxB,CADF,EAZgD,CAoBhD;;AACAX,MAAAA,QAAQ,CAACI,IAAT,CAAcQ,WAAd,CAA0Bb,IAA1B;AACD;;AAEDZ,IAAAA,EAAE,CAAC0B,SAAH,CAAaxB,MAAb,EAAqB,UAACyB,GAAD,EAAMC,IAAN,EAAe;AAClC,UAAID,GAAJ,EAAS;AACPE,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ,EAAiBA,GAAG,CAACI,KAArB;AACD,OAFD,MAEO;AACL,YAAMC,OAAO,GAAG,IAAIC,IAAJ,CAAS,CAACL,IAAI,CAACM,IAAL,CAAUC,QAAV,EAAD,CAAT,EAAiC;AAC/CC,UAAAA,IAAI,EAAE;AADyC,SAAjC,CAAhB;AAGA9B,QAAAA,YAAY,CAAC0B,OAAD,gBAAZ;AACD;AACF,KATD;AAUD,GA1CD;;AA2CAH,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACA,sBACE;AAAA,2BACE;AAAM,MAAA,SAAS,EAAC,eAAhB;AAAgC,MAAA,QAAQ,EAAElC,WAA1C;AAAA,6BACE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,KAAK,EAAC,UAFR;AAGE,QAAA,SAAS,EAAC,gCAHZ;AAIE,QAAA,OAAO,EAAEG;AAJX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AAYD,CAlED;;AAoEA,eAAeZ,WAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport AWS from 'aws-sdk';\r\n\r\nconst downloadImg = () => {\r\n  AWS.config.update({\r\n    accessKeyId: process.env.REACT_APP_ACCESS_ID,\r\n    secretAccessKey: process.env.REACT_APP_ACCESS_KEY,\r\n  });\r\n\r\n  const handleClick = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    const s3 = new AWS.S3();\r\n\r\n    const params = {\r\n      Bucket: process.env.REACT_APP_INTERNAL_BUCKET_NAME,\r\n      Key: `ARACAJU.png`,\r\n    };\r\n\r\n    function downloadBlob(blob, name = `ARACAJU.png`) {\r\n      // Convert your blob into a Blob URL (a special url that points to an object in the browser's memory)\r\n      const blobUrl = URL.createObjectURL(blob);\r\n      // Create a link element\r\n      const link = document.createElement('a');\r\n      // Set link's href to point to the Blob URL\r\n      link.href = blobUrl;\r\n      link.download = name;\r\n      // Append link to the body\r\n      document.body.appendChild(link);\r\n      // Dispatch click event on the link\r\n      // This is necessary as link.click() does not work on the latest firefox\r\n      link.dispatchEvent(\r\n        new MouseEvent('click', {\r\n          bubbles: true,\r\n          cancelable: true,\r\n          view: window,\r\n        }),\r\n      );\r\n\r\n      // Remove link from body\r\n      document.body.removeChild(link);\r\n    }\r\n\r\n    s3.getObject(params, (err, data) => {\r\n      if (err) {\r\n        console.log(err, err.stack);\r\n      } else {\r\n        const csvBlob = new Blob([data.Body.toString()], {\r\n          type: 'text/csv;charset=utf-8;',\r\n        });\r\n        downloadBlob(csvBlob, `ARACAJU.png`);\r\n      }\r\n    });\r\n  };\r\n  console.log('testando');\r\n  return (\r\n    <>\r\n      <form className=\"bg-white my-4\" onSubmit={handleClick}>\r\n        <input\r\n          type=\"submit\"\r\n          value=\"Download\"\r\n          className=\"btn btn-primary btn-block mt-3\"\r\n          onClick={handleDownload}\r\n        />\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default downloadImg;\r\n"]},"metadata":{},"sourceType":"module"}